<app-navbar></app-navbar>

<div *ngIf="orders && orders.length > 0; else noOrders">
  <div class="container">
    <div class="row">
      <div *ngFor="let order of orders" class="col-12 mb-4">
        <div class="card shadow-lg border-2 border-primary rounded-3">
          <!-- Encabezado de la Orden -->
          <div class="card-header bg-primary text-white">
            <h5 class="mb-0">Orden ID: {{ order.id }}</h5>
          </div>

          <div class="card-body">
            <div class="row">
              <!-- Informaci贸n de la orden -->
              <div class="col-md-6">
                <h6 class="text-secondary"><i class="fas fa-info-circle"></i> Informaci贸n de la Orden</h6>
                <p>
                  <strong>Fecha de Creaci贸n:</strong> {{ order.dateCreated | date : "short" }}
                </p>
                <p>
                  <strong>Estado:</strong>
                  <span class="badge" [ngClass]="getStatusClass(order.orderState)">
                    {{ order.orderState }}
                  </span>
                </p>
              </div>

              <!-- Datos del Usuario -->
              <div class="col-md-6 border-start">
                <h6 class="text-secondary"><i class="fas fa-user"></i> Datos del Usuario</h6>
                <p><strong>ID:</strong> {{ order.userId }}</p>
                <p><strong>Nombre:</strong> {{ order.userName || "No disponible" }}</p>
                <p><strong>Email:</strong> {{ order.userEmail || "No disponible" }}</p>
              </div>
            </div>

            <hr />

            <!-- Lista de Productos -->
            <h6 class="mt-3 text-secondary"><i class="fas fa-box"></i> Productos:</h6>
            <ul class="list-group">
              <li *ngFor="let product of order.orderProducts" class="list-group-item border rounded mb-2 shadow-sm">
                <div class="row">
                  <div class="col-md-6">
                    <p><strong>Nombre:</strong> {{ product.productName || "Desconocido" }}</p>
                    <p><strong>ID:</strong> {{ product.productId }}</p>
                  </div>
                  <div class="col-md-6">
                    <p><strong>Cantidad:</strong> {{ product.quantity }}</p>
                    <p><strong>Precio:</strong> {{ product.price | currency }}</p>
                    <p class="text-success">
                      <strong>Total:</strong> {{ product.price * product.quantity | currency }}
                    </p>
                  </div>
                </div>
              </li>
            </ul>

            <hr />

            <!-- Total de la Orden -->
            <h4 class="text-end text-success">
              <strong>Total Pedido: {{ order.totalOrderPrice || 0 | currency }}</strong>
            </h4>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #noOrders>
  <p class="text-center text-muted">No hay 贸rdenes disponibles.</p>
</ng-template>

<app-footer></app-footer>
