<!-- <app-header-admin></app-header-admin>
 -->
<app-navbar></app-navbar>
<div class="container mx-auto p-4">
  <!-- Botón Crear Producto -->
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-semibold">Productos</h2>
    <a class="button-item p-2 w-40" routerLink="/admin/product/addproduct"
      >Crear Producto</a
    >
  </div>
  <p class="ux-helper mb-4">Mantené el catálogo ordenado. Podés editar o eliminar productos desde esta vista.</p>

  <div *ngIf="isLoading" class="ux-skeleton-grid">
    <div class="skeleton-card">
      <div class="skeleton-block skeleton-line"></div>
      <div class="skeleton-block skeleton-line"></div>
      <div class="skeleton-block skeleton-line"></div>
    </div>
    <div class="skeleton-card">
      <div class="skeleton-block skeleton-line"></div>
      <div class="skeleton-block skeleton-line"></div>
      <div class="skeleton-block skeleton-line"></div>
    </div>
  </div>

  <div *ngIf="!isLoading && products.length === 0" class="ux-empty">
    No hay productos todavía. Creá el primero para empezar a vender.
  </div>

  <!-- Cards mobile -->
  <div class="space-y-4 md:hidden" *ngIf="!isLoading && products.length > 0">
    <div *ngFor="let product of products" class="ds-card">
      <div class="flex items-start justify-between gap-3">
        <div>
          <p class="text-xs uppercase tracking-widest text-secondary">Código #{{ product.id }}</p>
          <h3 class="text-lg font-semibold text-main">{{ product.name }}</h3>
          <p class="text-sm text-secondary mt-2">{{ product.description }}</p>
          <p class="text-sm text-secondary mt-2">
            Precio: <span class="font-semibold text-main">{{ product.price | currency }}</span>
          </p>
          <p class="text-xs text-secondary">
            {{ product.priceOverride ? 'Precio personalizado' : 'Precio de categoría' }}
          </p>
          <p class="text-sm text-secondary">Cuotas: {{ product.code }}</p>
        </div>
      </div>
      <div class="mt-4 flex gap-2">
        <button
          class="button-item button-item--outline button-item--sm flex-1"
          [routerLink]="['/admin/product/update', product.id]"
        >
          Editar
        </button>
        <button
          class="button-item button-item--danger button-item--sm flex-1"
          (click)="deleteProductById(product.id)"
        >
          Eliminar
        </button>
      </div>
    </div>
  </div>

  <!-- Tabla desktop -->
  <div class="hidden md:block" *ngIf="!isLoading && products.length > 0">
    <div class="overflow-x-auto">
      <table class="table-shell admin-table">
        <thead>
          <tr>
            <th>Código</th>
            <th>Nombre</th>
            <th>Descripción</th>
            <th>Precio</th>
            <th>Tipo de precio</th>
            <th>Cuotas</th>
            <th>Editar</th>
            <th>Eliminar</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of products">
            <td class="table-cell">{{ product.id }}</td>
            <td class="table-cell">{{ product.name }}</td>
            <td class="table-cell">{{ product.description }}</td>
            <td class="table-cell">{{ product.price | currency }}</td>
            <td class="table-cell">{{ product.priceOverride ? 'Personalizado' : 'Categoría' }}</td>
            <td class="table-cell">{{ product.code }}</td>
            <td class="table-cell">
              <button
                class="button-item button-item--outline button-item--sm"
                [routerLink]="['/admin/product/update', product.id]"
              >
                Editar
              </button>
            </td>
            <td class="table-cell">
              <button
                class="button-item button-item--danger button-item--sm"
                (click)="deleteProductById(product.id)"
              >
                Eliminar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<app-footer></app-footer>
