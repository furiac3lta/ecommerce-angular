<!-- <app-header-admin></app-header-admin>
 -->
<app-navbar></app-navbar>
<div class="container mx-auto p-4">
  <!-- Botón Crear Producto -->
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-semibold">Productos</h2>
    <a class="button-item p-2 w-40" routerLink="/admin/product/addproduct"
      >Crear Producto</a
    >
  </div>

  <!-- Cards mobile -->
  <div class="space-y-4 md:hidden">
    <div *ngFor="let product of products" class="rounded-2xl border border-divider bg-surface p-4 shadow-sm">
      <div class="flex items-start justify-between gap-3">
        <div>
          <p class="text-xs uppercase tracking-widest text-secondary">Código #{{ product.id }}</p>
          <h3 class="text-lg font-semibold text-main">{{ product.name }}</h3>
          <p class="text-sm text-secondary mt-2">{{ product.description }}</p>
          <p class="text-sm text-secondary mt-2">
            Precio: <span class="font-semibold text-main">{{ product.price | currency }}</span>
          </p>
          <p class="text-sm text-secondary">Cuotas: {{ product.code }}</p>
        </div>
      </div>
      <div class="mt-4 flex gap-2">
        <button
          class="flex-1 rounded-full border border-divider py-2 text-sm font-semibold text-main"
          [routerLink]="['/admin/product/update', product.id]"
        >
          Editar
        </button>
        <button
          class="flex-1 rounded-full border border-red-500/40 py-2 text-sm font-semibold text-red-600"
          (click)="deleteProductById(product.id)"
        >
          Eliminar
        </button>
      </div>
    </div>
  </div>

  <!-- Tabla desktop -->
  <div class="hidden md:block">
    <table
      mat-table
      [dataSource]="products"
      class="table-shell"
    >
      <!-- Código -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef class="p-2 text-left text-gray-600">
          Código
        </th>
        <td mat-cell *matCellDef="let product" class="p-2 text-gray-800">
          {{ product.id }}
        </td>
      </ng-container>

      <!-- Nombre -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef class="p-2 text-left text-gray-600">
          Nombre
        </th>
        <td mat-cell *matCellDef="let product" class="p-2 text-gray-800">
          {{ product.name }}
        </td>
      </ng-container>

      <!-- Descripción -->
      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef class="p-2 text-left text-gray-600">
          Descripción
        </th>
        <td mat-cell *matCellDef="let product" class="p-2 text-gray-800">
          {{ product.description }}
        </td>
      </ng-container>

      <!-- Precio -->
      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef class="p-2 text-left text-gray-600">
          Precio
        </th>
        <td mat-cell *matCellDef="let product" class="p-2 text-gray-800">
          {{ product.price | currency }}
        </td>
      </ng-container>
      <!-- Cuotas -->
      <ng-container matColumnDef="code">
        <th mat-header-cell *matHeaderCellDef class="p-2 text-left text-gray-600">
          Cuotas
        </th>
        <td mat-cell *matCellDef="let product" class="p-2 text-gray-800">
          {{ product.code }}
        </td>
      </ng-container>
      <!-- Editar -->
      <ng-container matColumnDef="edit">
        <th mat-header-cell *matHeaderCellDef class="p-2 text-left text-gray-600">
          Editar
        </th>
        <td mat-cell *matCellDef="let product" class="p-2">
          <button
            mat-button
            color="primary"
            class="button-item button-item--outline button-item--sm"
            [routerLink]="['/admin/product/update', product.id]"
          >
            Editar
          </button>
        </td>
      </ng-container>

      <!-- Eliminar -->
      <ng-container matColumnDef="delete">
        <th mat-header-cell *matHeaderCellDef class="p-2 text-left text-gray-600">
          Eliminar
        </th>
        <td mat-cell *matCellDef="let product" class="p-2">
          <button
            mat-button
            color="warn"
            class="button-item button-item--danger button-item--sm"
            (click)="deleteProductById(product.id)"
          >
            Eliminar
          </button>
        </td>
      </ng-container>

      <!-- Header y filas de datos -->
      <tr
        mat-header-row
        *matHeaderRowDef="displayedColumns"
      ></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
</div>
<app-footer></app-footer>
