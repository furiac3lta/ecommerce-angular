<header class="navbar-shell w-full sticky top-0 z-20">
  <div class="flex justify-between items-center max-w-[1400px] mx-auto px-4 py-3 w-full">
    <div class="flex items-center gap-3">
      <img class="h-10 w-10 object-contain" src="assets/bjj/logo.png" alt="Lions Brand logo" />
      <div class="leading-tight">
        <p class="text-xs uppercase tracking-[0.3em] text-secondary">BJJ Kimonos</p>
        <h1 class="text-xl md:text-2xl !m-0">Lions Brand</h1>
      </div>
    </div>

    <button
      class="block lg:hidden rounded-lg border border-divider px-3 py-2"
      (click)="menuOpen = !menuOpen"
      aria-label="Abrir menú"
    >
      <mat-icon class="text-2xl text-main">menu</mat-icon>
    </button>

    <nav
      [ngClass]="{ 'hidden': !menuOpen, 'block': menuOpen }"
      class="w-full lg:flex lg:items-center lg:justify-between lg:static absolute top-[62px] left-0 right-0 bg-surface lg:bg-transparent z-10 p-4 lg:p-0 border-b lg:border-0 border-divider"
    >
      <ul class="flex flex-col lg:flex-row items-center gap-4 lg:gap-8">
        <li class="nav-item"><a (click)="gotoHome()">Inicio</a></li>
        <li class="nav-item"><a (click)="gotoProduct()">Productos</a></li>
        <li class="nav-item" *ngIf="isLoggedIn && !isAdmin"><a (click)="handleUserIconClick()">Mis pedidos</a></li>

        <ng-container *ngIf="isAdmin; else guestLinks">
          <li class="nav-item"><a (click)="gotoProd()">ABM Prod</a></li>
          <li class="nav-item"><a (click)="gotoCat()">ABM Cat</a></li>
          <li class="nav-item"><a (click)="gotoStock()">Stock</a></li>
          <li class="nav-item"><a (click)="gotoOrders()">Órdenes</a></li>
        </ng-container>

        <ng-template #guestLinks>
          <li class="nav-item"><a (click)="gotoContact()">Contacto</a></li>
          <li class="nav-item"><a (click)="gotoAbout()">La Marca</a></li>
        </ng-template>
      </ul>
    </nav>

    <div class="flex items-center gap-2">
      <span *ngIf="isLoggedIn && userLabel" class="text-sm text-secondary hidden md:inline">{{ userLabel }}</span>
      <button mat-icon-button class="icon-button" (click)="toggleTheme()">
        <mat-icon class="text-2xl">{{ isDarkMode ? 'light_mode' : 'dark_mode' }}</mat-icon>
      </button>
      <button mat-icon-button class="cart-button" (click)="cart()" [matBadge]="cartItemsQty" matBadgeColor="warn">
        <mat-icon class="text-3xl text-main">local_mall</mat-icon>
      </button>
      <button
        mat-icon-button
        *ngIf="isLoggedIn"
        (click)="logout()"
      >
        <mat-icon class="text-3xl text-main">logout</mat-icon>
      </button>
      <button
        mat-icon-button
        *ngIf="!isLoggedIn"
        (click)="handleUserIconClick()"
      >
        <mat-icon class="text-3xl text-main">person_outline</mat-icon>
      </button>
    </div>
  </div>
</header>
